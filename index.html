<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine?</title>

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <style>
    :root {
      --bg1: #ffd6e7;
      --bg2: #ffeef6;
      --card: #ffffffcc;
      --yes: #ff3b7a;
      --yesHover: #ff1f68;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, var(--bg2), var(--bg1));
      font-family: system-ui, sans-serif;
      overflow: hidden;
      padding: 16px;
    }

    .heart-img {
      position: fixed;
      width: 560px;
      height: 560px;
      object-fit: cover;
      object-position: center 10%;
      clip-path: polygon(
        50% 90%,10% 55%,0% 35%,10% 15%,30% 10%,
        50% 25%,70% 10%,90% 15%,100% 35%,90% 55%
      );
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.35));
      pointer-events: none;
      z-index: 2;
      transform: rotate(var(--rot, 0deg));
      animation: float 6s ease-in-out infinite;
    }

    .left.top{left:2vw;top:10vh}
    .left.bottom{left:4vw;bottom:10vh}
    .right.top{right:2vw;top:10vh}
    .right.bottom{right:4vw;bottom:10vh}

    @keyframes float{
      0%,100%{transform:translateY(0) rotate(var(--rot))}
      50%{transform:translateY(-18px) rotate(var(--rot))}
    }

    #confettiCanvas{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:9999;
    }

    .card{
      width:min(720px,92vw);
      padding:26px 22px;
      background:var(--card);
      backdrop-filter:blur(10px);
      border-radius:22px;
      text-align:center;
      box-shadow:0 18px 60px rgba(0,0,0,.15);
      z-index:3;
    }

    .art{
      width:min(260px,80vw);
      margin:0 auto 10px;
      display:block;
      filter:drop-shadow(0 10px 14px rgba(0,0,0,.12));
      animation:bob 2.6s ease-in-out infinite;
    }

    @keyframes bob{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-6px)}
    }

    h1{
      font-size:clamp(26px,4vw,44px);
      margin:12px 0 18px;
    }

    .button-zone{
      position:relative;
      width:min(520px,92%);
      height:150px;
      margin:0 auto;
      touch-action:none;
    }

    button{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      padding:16px 24px;
      font-size:18px;
      font-weight:800;
      border-radius:999px;
      border:none;
      cursor:pointer;
      box-shadow:0 10px 24px rgba(0,0,0,.14);
    }

    #yesBtn{left:18%;background:var(--yes);color:#fff}
    #noBtn{left:62%;background:#e5e7eb;color:#111827}

    .hint{margin-top:10px;font-size:13px;opacity:.7}

    .result{
      display:none;
      margin-top:18px;
      animation:pop .35s ease;
    }

    @keyframes pop{
      from{transform:scale(.96);opacity:0}
      to{transform:scale(1);opacity:1}
    }
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>

  <img src="candi1.jpg" class="heart-img left top">
  <img src="candi2.jpg" class="heart-img left bottom">
  <img src="candi3.jpg" class="heart-img right top">
  <img src="candi4.jpg" class="heart-img right bottom">

  <div id="ytPlayer" style="position:fixed;left:-9999px;top:-9999px"></div>

  <main class="card">
    <img src="rat.png" class="art">

    <h1>Candice will you be my valentine?</h1>

    <section class="button-zone" id="zone">
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
    </section>

    <div class="hint" id="hint">‚ÄúNo‚Äù isn't an option üòä</div>

    <section class="result" id="result">
      <h2>YAY!!!!! and many more Valentine‚Äôs Days to come!!!</h2>
      <img src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" width="320">
    </section>
  </main>

  <script>
    const zone=document.getElementById("zone");
    const yesBtn=document.getElementById("yesBtn");
    const noBtn=document.getElementById("noBtn");
    const result=document.getElementById("result");
    const hint=document.getElementById("hint");

    document.querySelectorAll(".heart-img").forEach((img,i)=>{
      img.style.setProperty("--rot",((Math.random()*36)-18+(i%2?-4:4))+"deg");
    });

    const confettiCanvas=document.getElementById("confettiCanvas");
    const confettiInstance=confetti.create(confettiCanvas,{resize:true});

    function blast(){
      confettiInstance({particleCount:300,spread:140,startVelocity:60});
    }

    let yesScale=1;

    function growYes(){
      yesScale=Math.min(2.2,yesScale+.1);
      yesBtn.style.transform=`translateY(-50%) scale(${yesScale})`;
    }

    function moveNo(px,py){
      const z=zone.getBoundingClientRect();
      const b=noBtn.getBoundingClientRect();
      let dx=(b.left+b.width/2)-px;
      let dy=(b.top+b.height/2)-py;
      let m=Math.hypot(dx,dy)||1;
      dx/=m;dy/=m;
      noBtn.style.left=Math.max(0,Math.min((b.left-z.left)+dx*150,z.width-b.width))+"px";
      noBtn.style.top=Math.max(0,Math.min((b.top-z.top)+dy*150,z.height-b.height))+"px";
      growYes();
    }

    zone.addEventListener("pointermove",e=>{
      const b=noBtn.getBoundingClientRect();
      if(Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY)<140){
        moveNo(e.clientX,e.clientY);
      }
    });

    noBtn.onclick=e=>e.preventDefault();

    const VIDEO_ID="N5PdvXVXh1c";
    const START=20;
    let player,ready=false;

    window.onYouTubeIframeAPIReady=()=>{
      player=new YT.Player("ytPlayer",{
        videoId:VIDEO_ID,
        playerVars:{playsinline:1,controls:0,mute:1},
        events:{
          onReady:e=>{
            ready=true;
            e.target.cueVideoById({videoId:VIDEO_ID,startSeconds:START});
          }
        }
      });
    };

    yesBtn.onclick=()=>{
      zone.style.display="none";
      hint.style.display="none";
      result.style.display="block";
      blast();

      if(ready){
        player.loadVideoById({videoId:VIDEO_ID,startSeconds:START});
        setTimeout(()=>{
          player.unMute();
          player.setVolume(100);
        },400);
      }
    };
  </script>
</body>
</html>
